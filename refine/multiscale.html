
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Refine Multiscale Metric &#8212; pyrefine  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxdoc.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Goal-oriented Metrics" href="goal_oriented.html" />
    <link rel="prev" title="Simulation Base Class" href="../simulation/base.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="goal_oriented.html" title="Goal-oriented Metrics"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../simulation/base.html" title="Simulation Base Class"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyrefine  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Refine Multiscale Metric</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="refine-multiscale-metric">
<h1>Refine Multiscale Metric<a class="headerlink" href="#refine-multiscale-metric" title="Permalink to this heading">¶</a></h1>
<p>The multiscale metric looks reduce interpolation error in the solution.
For unsteady problems, the fixed point version can account for the change in
the solution over the time period of interest and form an averaged metric.</p>
<span class="target" id="module-pyrefine.refine.multiscale"></span><section id="multiscale">
<h2>Multiscale<a class="headerlink" href="#multiscale" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscale">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyrefine.refine.multiscale.</span></span><span class="sig-name descname"><span class="pre">RefineMultiscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscale" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="base.html#pyrefine.refine.base.RefineBase" title="pyrefine.refine.base.RefineBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">RefineBase</span></code></a></p>
<p>Refine for steady analysis (single solution field) and the multiscale
metric based on Mach number</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>project_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The root name of the project (without any mesh numbers)</p></li>
<li><p><strong>pbs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">PBS</span></code>]) – PBS queue helper</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscale.lp_norm">
<span class="sig-name descname"><span class="pre">lp_norm</span></span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscale.lp_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>The lp norm value for the refine metric computation. Larger values
will target the regions of highest error more but may underresolve
lower gradient regions too much. The default value is 4.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int or float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscale.interpolant">
<span class="sig-name descname"><span class="pre">interpolant</span></span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscale.interpolant" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the scalar field used as the interpolant.
mach (default), incomp (incompressible vel magnitude),
htot, pressure, density, temperature.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscale.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">istep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">complexity</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscale.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs refine to calculate a multiscale metric, generate a new mesh, and
interpolate the solution to the new mesh.</p>
</dd></dl>

</dd></dl>

</section>
<section id="fixed-point-multiscale">
<h2>Fixed Point Multiscale<a class="headerlink" href="#fixed-point-multiscale" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscaleFixedPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyrefine.refine.multiscale.</span></span><span class="sig-name descname"><span class="pre">RefineMultiscaleFixedPoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscaleFixedPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyrefine.refine.multiscale.RefineMultiscale" title="pyrefine.refine.multiscale.RefineMultiscale"><code class="xref py py-class docutils literal notranslate"><span class="pre">RefineMultiscale</span></code></a></p>
<p>Refine’s fixed point metric for unsteady analysis where there are multiple
snapshots of the flow field.
Multiscale metric based on Mach number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>project_name</strong> (<em>str</em>) – The root name of the project (without any mesh numbers)</p></li>
<li><p><strong>pbs</strong> (<em>:class:PBS</em>) – PBS queue helper</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.window_first_step">
<span class="sig-name descname"><span class="pre">window_first_step</span></span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.window_first_step" title="Permalink to this definition">¶</a></dt>
<dd><p>The start of the sampling window from which refine should compute the metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.window_last_step">
<span class="sig-name descname"><span class="pre">window_last_step</span></span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.window_last_step" title="Permalink to this definition">¶</a></dt>
<dd><p>The end of the sampling window from which refine should compute the metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.window_metric_freq">
<span class="sig-name descname"><span class="pre">window_metric_freq</span></span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.window_metric_freq" title="Permalink to this definition">¶</a></dt>
<dd><p>The sampling frequency in the window from which refine should
compute the metric.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.sampling_data_filename_body">
<span class="sig-name descname"><span class="pre">sampling_data_filename_body</span></span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.sampling_data_filename_body" title="Permalink to this definition">¶</a></dt>
<dd><p>The middle part of the filename which refine should look for the
scalar on which to base the metric on. For example,
bscw-box20[_sampling_geom1_timestep]1000.solb #: where the body is
the part in square brackets before the timestep number
(1000) and after the project name + adaptation cycle number (bscw-box20).
The default name is “_sampling_geom1_timestep”</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.set_timestep_range_and_frequency">
<span class="sig-name descname"><span class="pre">set_timestep_range_and_frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">first_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_freq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.set_timestep_range_and_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the window of timesteps from which refine should compute the metric
and set the metric step frequency, i.e. the frequency at which solution
files were saved during the analysis in window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>first_step</strong> (<em>int</em>) – </p></li>
<li><p><strong>last_step</strong> (<em>int</em>) – </p></li>
<li><p><strong>metric_freq</strong> (<em>int</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">istep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">complexity</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyrefine.refine.multiscale.RefineMultiscaleFixedPoint.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run refine in fixed-point mode for unsteady problems</p>
</dd></dl>

</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Refine Multiscale Metric</a><ul>
<li><a class="reference internal" href="#multiscale">Multiscale</a></li>
<li><a class="reference internal" href="#fixed-point-multiscale">Fixed Point Multiscale</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../simulation/base.html"
                          title="previous chapter">Simulation Base Class</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="goal_oriented.html"
                          title="next chapter">Goal-oriented Metrics</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/refine/multiscale.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="goal_oriented.html" title="Goal-oriented Metrics"
             >next</a> |</li>
        <li class="right" >
          <a href="../simulation/base.html" title="Simulation Base Class"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyrefine  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Refine Multiscale Metric</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, NASA.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
  </body>
</html>